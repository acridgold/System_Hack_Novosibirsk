# Front-End — запуск и разработка (Windows)

Это README описывает, как запустить фронтенд-часть проекта на локальной машине под Windows. Инструкции покрывают установку Node.js, установку зависимостей, запуск dev-сервера, сборку и отладку.

Содержание:
- Требования
- Быстрая установка и запуск (Windows)
- Скрипты в package.json
- Переменные окружения
- Советы по отладке и типичные проблемы
- Полезные команды
- Структура Front-End

Требования
----------
- Windows 10/11
- Node.js 18+ (рекомендуется LTS)
- npm (идёт вместе с Node.js) либо yarn/pnpm (опционально)
- Рекомендуемая память: 4+ GB

Установка Node.js
-----------------
1. Перейдите на https://nodejs.org/ и скачайте LTS-версию (рекомендуется).
2. После установки откройте командную строку (cmd.exe) и проверьте версии:

```
node --version
npm --version
```

Если используете PowerShell или WSL — команды те же, но в этом README мы предполагаем cmd.exe.

Подготовка проекта
------------------
Перейдите в папку фронтенда проекта:

```
cd "\Front-End"
```

Установка зависимостей
----------------------
Обычно используются npm-скрипты. Выполните в папке `Front-End`:

```
npm install
```

Если вы предпочитаете yarn или pnpm, установите их глобально и запустите `yarn` или `pnpm install`.

Запуск в режиме разработки
-------------------------
После установки зависимостей запустите dev-сервер Vite:

```
npm run dev
```

По умолчанию приложение будет доступно по адресу http://localhost:5173 . В логах терминала Vite укажет точный URL.

Сборка для продакшна
--------------------
Создание оптимизированной сборки:

```
npm run build
```

Полученные файлы окажутся в папке `dist/`.

Просмотр продакшн-версии локально
--------------------------------
Чтобы локально просмотреть итоговую сборку (preview):

```
npm run preview
```

Или можно использовать команду npm run build_preview, которая объединяет сборку и предпросмотр:

```
npm run build_preview
```

Это поднимет простой сервер и покажет содержимое `dist/`.

Скрипты (из package.json)
-------------------------
Основные скрипты, которые вероятно есть в package.json фронтенда:
- dev — запускает Vite в режиме разработки
- build — создаёт production-билд
- preview — предварительный просмотр production билда
- build_preview — сборка + предпросмотр
- predeploy — (опционально) подготовка к деплою
- deploy — (опционально) деплой на GitHub Pages или другой хост

Переменные окружения
---------------------
Если проект использует переменные окружения, они обычно хранятся в файлах `.env` или `.env.local` в корне `Front-End`.
Примеры переменных:
- VITE_API_URL — базовый URL бэкенда (например, http://localhost:8000)

Пример .env.local (создайте файл вручную, если нужно):

```
VITE_API_URL=http://localhost:8000
```

Важно: в Vite переменные, которые должны быть доступны в браузере, должны начинаться с префикса VITE_.

Локальное хранение состояния (особенности проекта)
-------------------------------------------------
В этом проекте выполнение рекомендаций хранится в localStorage с ключом `recommendations_completed_<userId>` или `recommendations_completed_guest` для гостя. При тестировании учтите, что очистка localStorage влияет на отображаемые счетчики.

Чтобы обнулить все помеченные рекомендации (локально):
- Откройте DevTools в браузере (F12) → Application → Local Storage → выберите origin (http://localhost:5173) → найдите и удалите ключи `recommendations_completed_*`.

Типичные проблемы и решения
---------------------------
- Неправильная версия Node.js — убедитесь, что версия >= 18.
- Порт 5173 занят — Vite предложит другой порт или вы можете запустить `npm run dev -- --port 3000`.
- Ошибки зависимостей при npm install — попробуйте удалить `node_modules` и `package-lock.json` и выполнить `npm ci` или `npm install` снова.
- CORS/Backend недоступен — проверьте, что бэкенд запущен на ожидаемом адресе и совпадает с VITE_API_URL.
- LocalStorage не синхронизируется между вкладками — для синхронизации проект слушает событие `storage`; в некоторых окружениях (file://) оно может работать некорректно.

Проверка работы (smoke test)
---------------------------
1. Запустите dev-сервер: `npm run dev`.
2. Откройте http://localhost:5173 в браузере.
3. Перейдите на страницу рекомендаций (обычно /recommendations).
4. Отметьте одну из рекомендаций галочкой — состояние должно сохраниться в localStorage и отражаться в счетчике "Выполнено".
5. Откройте новую вкладку с тем же адресом — при изменении localStorage в одной вкладке счётчик должен обновиться автоматически (через событие storage).

Полезные команды
----------------
- Установить зависимости: npm install
- Запустить dev: npm run dev
- Собрать production: npm run build
- Просмотреть сборку: npm run preview
- Очистить кеш и переустановить зависимости:
  - rmdir /s /q node_modules
  - del package-lock.json
  - npm install

Структура Front-End
-------------------
Ниже — дерево основных папок и файлов фронтенда с кратким описанием, чтобы быстро ориентироваться, где что находится.

Front-End/
├── index.html              — основной HTML-шаблон
├── package.json            — скрипты и зависимости проекта
├── vite.config.js          — конфигурация Vite
├── README.md               — этот файл (инструкции и подсказки)
├── public/                 — статические файлы, доступные как есть
│   ├── 404.html
│   ├── favicon.png
│   ├── manifest.json
│   ├── service-worker.js
│   └── questionsAssets/    — наборы изображений и ассетов для вопросов/контента
│       └── <категории с изображениями>
└── src/                    — исходный код React приложения
    ├── main.jsx            — точка входа: рендер приложения
    ├── App.jsx             — корневой React-компонент, маршруты
    ├── index.jsx / index.js— вспомогательные точки входа / совместимость
    ├── reportWebVitals.js  — (если используется) метрики/telemetry
    ├── index.css           — базовые стили
    ├── components/         — переиспользуемые UI-компоненты
    │   ├── TeamModal.jsx
    │   ├── assessment/      — компоненты для страницы Assessment
    │   ├── common/          — общие UI-элементы (кнопки, карточки и т.п.)
    │   ├── dashboard/       — виджеты и компоненты дашборда
    │   ├── layout/          — Header, Sidebar, Footer и прочие Layout-компоненты
    │   └── recommendations/ — карточки рекомендаций, чекбоксы и т.п.
    ├── pages/              — страницы приложения (роуты)
    │   ├── Home.jsx
    │   ├── Login.jsx
    │   ├── Register.jsx
    │   ├── Assessment.jsx
    │   ├── Recommendations.jsx — логика отображения рекомендаций и localStorage
    │   ├── Dashboard.jsx
    │   └── Profile.jsx
    ├── services/           — API-обёртки и HTTP-клиенты
    │   ├── api.js          — базовый axios/fetch wrapper
    │   └── auth.js         — функции логина/авторизации
    ├── store/              — Redux/RTK store и слайсы
    │   ├── store.js
    │   ├── index.js
    │   └── slices/         — отдельные слайсы состояния (пользователь, recommendations и т.д.)
    ├── styles/             — глобальные и theme-стили
    │   ├── global.css
    │   └── theme.js
    └── utils/              — утилиты и мок-данные
        ├── constants.js
        ├── mockRecommendations.js
        └── mockUser.js

Краткие подсказки
- Все визуальные компоненты держите в `src/components` — страницы собирают их вместе.
- Запросы к бэкенду и обработка токенов в `src/services`.
- Глобальное состояние и синхронизация между страницами — `src/store` и `src/store/slices`.
- Страница рекомендаций и связанная логика находятся в `src/pages/Recommendations.jsx` и `src/components/recommendations/`.

Дополнительно
------------
Если вы планируете подключать бэкенд, убедитесь, что у вас запущен сервер FastAPI (или другой) и его адрес совпадает с VITE_API_URL.

Контакты и ссылки
-----------------
При возникновении вопросов смотрите основной README проекта в корне репозитория или связывайтесь с авторами проекта.

Лицензия
--------
MIT
