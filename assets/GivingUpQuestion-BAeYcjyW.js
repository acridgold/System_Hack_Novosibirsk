import{A as I,j as n,r as i,P as k,B as r,T as F}from"./index-CIxEWNSq.js";const T=I(n.jsx("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star"),B=({currentAnswer:v,onAnswer:j})=>{const[a,R]=i.useState(v!==void 0?v:.5),[c,L]=i.useState(!1),Y=i.useRef(null),u=i.useRef({x:0,y:0}),p=i.useRef(0),g=170,f=450,X=500,E=80,w=100,A=450,e=(t=>{const o=X-g,s=E-f,l=Math.sqrt(o*o+s*s),m=w+(A-w)*t,h=Math.min(m,l),x=h/l,b=g+o*x,S=f+s*x,d=Math.atan2(s,-o)*(180/Math.PI);return{height:h,startX:g,startY:f,endX:X,endY:E,angle:d,topX:b,topY:S,vectorX:o,vectorY:s,totalLength:l}})(a),M=i.useCallback(t=>{L(!0);const o=t.clientX||t.touches&&t.touches[0].clientX,s=t.clientY||t.touches&&t.touches[0].clientY;o&&s&&(u.current={x:o,y:s},p.current=a),t.preventDefault()},[a]),y=i.useCallback(t=>{if(!c||!Y.current)return;const o=t.clientX||t.touches&&t.touches[0].clientX,s=t.clientY||t.touches&&t.touches[0].clientY;if(!o||!s)return;const l=o-u.current.x,m=s-u.current.y,h=e.vectorX/e.totalLength,x=e.vectorY/e.totalLength,b=l*h+m*x,d=Math.max(0,Math.min(1,p.current+b*.005));R(d),j(d),u.current={x:o,y:s},p.current=d},[c,j,e.vectorX,e.vectorY,e.totalLength]),D=i.useCallback(()=>{L(!1)},[]);i.useEffect(()=>{const t=s=>{y(s)},o=()=>{D()};return c&&(document.addEventListener("mousemove",t),document.addEventListener("mouseup",o),document.addEventListener("touchmove",t),document.addEventListener("touchend",o)),()=>{document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",o),document.removeEventListener("touchmove",t),document.removeEventListener("touchend",o)}},[c,y,D]);const C=(t=>Math.max(3,Math.floor(t/20)))(e.height);return n.jsx(k,{elevation:3,sx:{p:4,border:"2px solid #E0EFE5",background:"#FFFFFF",position:"relative",overflow:"hidden",minHeight:"600px",display:"flex",flexDirection:"column"},children:n.jsxs(r,{ref:Y,sx:{position:"relative",width:"100%",height:"500px",borderRadius:2,overflow:"hidden",userSelect:"none",touchAction:"none",display:"flex"},children:[n.jsx(r,{sx:{width:"80px",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between",padding:"20px 10px",zIndex:15},children:n.jsx(r,{sx:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between",width:"100%",my:2},children:n.jsx(r,{sx:{flex:1,width:"24px",my:1,position:"relative",overflow:"hidden",backgroundColor:"#E0E0E0",border:"1px solid #BDBDBD",borderRadius:"12px"},children:n.jsx(r,{sx:{position:"absolute",bottom:0,left:0,right:0,height:`${a*100}%`,backgroundColor:"#4CAF50",borderRadius:"12px",transition:"all 0.3s ease"}})})})}),n.jsxs(r,{sx:{flex:1,position:"relative"},children:[n.jsx(r,{sx:{position:"absolute",top:e.endY-40,left:e.endX-330,transform:"translateY(-50%)",zIndex:10,padding:"8px 12px"},children:n.jsx(F,{variant:"h6",fontWeight:"bold",color:"#000000",sx:{whiteSpace:"nowrap"},children:"Я преодолею любые трудности"})}),n.jsx(r,{sx:{position:"absolute",top:e.endY,left:e.endX,transform:"translate(-50%, -50%)",zIndex:11},children:n.jsx(T,{sx:{fontSize:70,color:a>.8?"#4CAF50":"#909090ff",filter:a>.8?"drop-shadow(0 0 8px #4CAF50)":"none",transition:"all 0.3s ease"}})}),n.jsx(r,{sx:{position:"absolute",top:e.startY+20,left:e.startX+40,transform:"translateY(-50%)",zIndex:10,padding:"8px 12px"},children:n.jsx(F,{fontWeight:"bold",color:"#000000ff",sx:{whiteSpace:"nowrap"},children:"У меня нет уверенности в своих силах"})}),n.jsxs(r,{sx:{position:"absolute",top:e.startY,left:e.startX,width:"60px",height:`${e.height}px`,transform:`rotate(${e.angle}deg)`,transformOrigin:"top left",zIndex:5},children:[n.jsx(r,{sx:{position:"absolute",left:"0px",width:"6px",height:"100%",background:"#4CAF50",borderRadius:"3px"}}),n.jsx(r,{sx:{position:"absolute",right:"0px",width:"6px",height:"100%",background:"#4CAF50",borderRadius:"3px"}}),Array.from({length:C},(t,o)=>{const s=o/(C-1)*e.height;return n.jsx(r,{sx:{position:"absolute",left:"6px",right:"6px",top:`${s}px`,height:"4px",background:"#4CAF50",borderRadius:"2px",transition:"all 0.2s ease"}},o)})]}),n.jsx(r,{sx:{position:"absolute",top:e.topY+50,left:e.topX-70,transform:"translate(-50%, -50%)",width:"220px",height:"220px",zIndex:20,cursor:c?"grabbing":"grab","&:hover":{transform:"translate(-50%, -50%) scale(1.1)"},transition:c?"none":"all 0.2s ease"},onMouseDown:M,onTouchStart:M,children:n.jsx("img",{src:"/questionsAssets/GivingUpQuestion/climbing.png",alt:"Объект на лестнице",style:{width:"100%",height:"100%",objectFit:"contain",borderRadius:"8px"}})})]})]})})};export{B as default};
