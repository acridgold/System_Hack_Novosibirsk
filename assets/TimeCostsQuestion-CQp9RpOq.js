import{r as o,j as t,P as B,B as r,T as w}from"./index-CIxEWNSq.js";const O=({question:P,currentAnswer:l,onAnswer:j})=>{const[d,C]=o.useState(l!==void 0?l:0),[i,A]=o.useState(!1),f=o.useRef(null),b=o.useRef(d*360),g=o.useRef(d*360),p=(e=>e*360)(d),L=d*3.7*360%360,D=(e,s)=>{const c=(e-90)*(Math.PI/180);return{x:s*Math.cos(c),y:s*Math.sin(c)}},m=o.useCallback((e,s)=>{const c=s.left+s.width/2,n=s.top+s.height/2,u=e.clientX||e.touches&&e.touches[0].clientX,a=e.clientY||e.touches&&e.touches[0].clientY;if(!u||!a)return g.current%360;const v=u-c,$=a-n;let E=Math.atan2($,v)*(180/Math.PI);return E=(E+360)%360,E},[]),R=o.useCallback(e=>{A(!0);const s=f.current.getBoundingClientRect(),c=m(e,s),n=b.current,u=n-c;f.current._angleOffset=u,g.current=n,e.preventDefault()},[m]),y=o.useCallback(e=>{if(!f.current||!i)return;const s=f.current.getBoundingClientRect();let n=m(e,s)+f.current._angleOffset;const u=g.current;let a=n-u;a>180&&(a-=360),a<-180&&(a+=360),n=u+a,n<0?n=0:n>=360&&(n=359.999),b.current=n,g.current=n;const v=n/360;C(v),j(v)},[i,j,m]),x=o.useCallback(e=>{i&&y(e)},[i,y]),h=o.useCallback(()=>{A(!1)},[]);o.useEffect(()=>(i&&(document.addEventListener("mousemove",x),document.addEventListener("mouseup",h),document.addEventListener("touchmove",x),document.addEventListener("touchend",h)),()=>{document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",x),document.removeEventListener("touchend",h)}),[i,x,h]),o.useEffect(()=>{l!==void 0&&(C(l),b.current=l*360,g.current=l*360)},[l]);const M=D(0,190),k=D(p,190),I=p>180?1:0,T=p>0?`M 0 0 L ${M.x} ${M.y} A 190 190 0 ${I} 1 ${k.x} ${k.y} Z`:"";return t.jsxs(B,{elevation:3,sx:{p:4,border:"2px solid #E0EFE5",position:"relative",overflow:"hidden",minHeight:"500px",display:"flex",flexDirection:"column"},children:[t.jsx(r,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:4,mb:1},children:t.jsxs(r,{sx:{position:"relative",width:"400px",height:"400px"},children:[t.jsx("svg",{width:"400",height:"400",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:2},children:p>0&&t.jsx("path",{d:T,fill:"#4CAF50",transform:"translate(200, 200)"})}),t.jsx(r,{component:"img",src:"questionsAssets/TimeCostsQuestion/clock.png",alt:"Циферблат",sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"380px",zIndex:3}}),t.jsx(r,{component:"img",src:"questionsAssets/TimeCostsQuestion/minute.png",alt:"Минутная стрелка",sx:{position:"absolute",top:"50%",left:"50%",transform:`translate(-50%, -50%) rotate(${L}deg)`,transformOrigin:"center",width:"360px",zIndex:4,transition:i?"none":"transform 0.1s ease"}}),t.jsx(r,{ref:f,component:"img",src:"questionsAssets/TimeCostsQuestion/hour.png",alt:"Основная стрелка",onMouseDown:R,onTouchStart:R,sx:{position:"absolute",top:"50%",left:"50%",transform:`translate(-50%, -50%) rotate(${p}deg)`,transformOrigin:"center",width:"400px",cursor:i?"grabbing":"grab",zIndex:5,transition:i?"none":"transform 0.1s ease","&:hover":i?{}:{filter:"drop-shadow(0 0 8px rgba(0,0,0,0.3))"}}})]})}),t.jsx(r,{sx:{mt:2,px:2},children:t.jsx(r,{sx:{display:"flex",alignItems:"center",gap:2,mt:1,position:"relative"},children:t.jsxs(r,{sx:{flexGrow:1,position:"relative"},children:[t.jsx(r,{sx:{height:16,borderRadius:"8px",backgroundColor:"#E0E0E0",position:"relative",overflow:"hidden",border:"1px solid #BDBDBD"},children:t.jsx(r,{sx:{position:"absolute",left:0,top:0,height:"100%",width:`${d*100}%`,backgroundColor:"#4CAF50",transition:"width 0.1s ease",borderRadius:d===1?"8px":"8px 0 0 8px"}})}),t.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",mt:.5},children:[t.jsx(w,{variant:"caption",color:"#000000",fontWeight:"bold",fontSize:"1rem",children:"Я никогда не перерабатываю"}),t.jsx(w,{variant:"caption",color:"#000000",fontWeight:"bold",fontSize:"1rem",children:"Когда требуется, я работаю до изнеможения"})]})]})})})]})};export{O as default};
