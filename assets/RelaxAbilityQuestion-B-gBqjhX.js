import{r as n,j as e,P as N,B as s,C as w,F as O,T as E}from"./index-CfofFhzz.js";const Y=({currentAnswer:C,onAnswer:R})=>{const[d,A]=n.useState(C!==void 0?C:.5),[c,I]=n.useState(!1),[y,F]=n.useState({}),[S,D]=n.useState(!0),[L,M]=n.useState({work:!1,relax:!1}),x=n.useRef(null),h=n.useRef(null),k=3,_=Array.from({length:k},(t,o)=>`/System_Hack_Novosibirsk/questionsAssets/RelaxAbilityQuestion/animation/${(o+1).toString().padStart(4,"0")}.png`),m=(t=>Math.min(Math.floor(t*k),k-1))(d);n.useEffect(()=>{(async()=>{D(!0);const o=_.map((i,l)=>new Promise(j=>{const v=new Image;v.onload=()=>{F(u=>({...u,[l]:i})),j()},v.onerror=()=>{F(u=>({...u,[l]:"fallback"})),j()},v.src=i})),a=new Image;a.onload=()=>M(i=>({...i,work:!0})),a.src="/System_Hack_Novosibirsk/questionsAssets/RelaxAbilityQuestion/work_pic.png";const r=new Image;r.onload=()=>M(i=>({...i,relax:!0})),r.src="/System_Hack_Novosibirsk/questionsAssets/RelaxAbilityQuestion/relax_pic.png",await Promise.all(o),D(!1)})()},[]);const B=(t,o,a)=>{const r=t*100,i=a/o*100/2;return`${Math.max(0+i,Math.min(100-i,r))}%`},W=t=>-100*Math.sin(t*Math.PI)-20,z=(t=400)=>{const o=t*.1,a=t*.9,r=320,i=80,l=t/2;return`M ${o},${r} Q ${l},${i} ${a},${r}`},X=t=>t<.5?{left:(.5-t)/.5*100,right:0}:t>.5?{left:0,right:(t-.5)/.5*100}:{left:0,right:0},[P,H]=n.useState({x:"50%",y:"50%"}),[Q,T]=n.useState(""),b=X(d);n.useEffect(()=>{const t=()=>{if(x.current&&h.current){const o=x.current.offsetWidth,a=h.current.offsetWidth;T(z(o));const r=B(d,o,a),l=`calc(50% + ${W(d)}px)`;H({x:r,y:l})}};return t(),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[d]);const $=n.useCallback(t=>{I(!0),g(t),t.preventDefault()},[]),g=n.useCallback(t=>{if(!x.current||!h.current)return;const o=x.current.getBoundingClientRect(),a=h.current.getBoundingClientRect(),r=t.clientX||t.touches&&t.touches[0].clientX;if(!r)return;const i=r-o.left,l=a.width/2,j=Math.max(l,Math.min(o.width-l,i)),u=Math.max(0,Math.min(1,(j-l)/(o.width-a.width)));A(u),R(u)},[R]),p=n.useCallback(t=>{c&&g(t)},[c,g]),f=n.useCallback(()=>{I(!1)},[]),q=n.useCallback(t=>{g(t)},[g]);return n.useEffect(()=>(c&&(document.addEventListener("mousemove",p),document.addEventListener("mouseup",f),document.addEventListener("touchmove",p),document.addEventListener("touchend",f)),()=>{document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",f),document.removeEventListener("touchmove",p),document.removeEventListener("touchend",f)}),[c,p,f]),e.jsx(N,{elevation:3,sx:{p:4,border:"2px solid #E0EFE5",background:"#FFFFFF",position:"relative",overflow:"hidden",minHeight:"600px",display:"flex",flexDirection:"column"},children:e.jsxs(s,{sx:{display:"flex",flexDirection:"column",gap:0,alignItems:"center",flex:1},children:[e.jsxs(s,{ref:x,sx:{position:"relative",width:"100%",cursor:c?"grabbing":"pointer",flex:1,mt:0},onClick:q,children:[e.jsx("svg",{width:"100%",height:"100%",style:{position:"absolute",top:0,left:0,pointerEvents:"none"},children:e.jsx("path",{d:Q,stroke:"rgba(0, 0, 0, 0.3)",strokeWidth:"4",fill:"none",strokeLinecap:"round"})}),e.jsx(s,{sx:{position:"absolute",bottom:"60px",left:"2%",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",gap:1},children:e.jsx(s,{sx:{width:"180px",borderRadius:"8px",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",background:"transparent"},children:L.work?e.jsx("img",{src:"/System_Hack_Novosibirsk/questionsAssets/RelaxAbilityQuestion/work_pic.png",alt:"Работа",style:{width:"100%",height:"100%",objectFit:"contain"}}):e.jsx(s,{sx:{width:"100%",height:"100%",background:"linear-gradient(135deg, #E0E0E0 0%, #BDBDBD 100%)",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"8px"},children:e.jsx(w,{sx:{color:"#757575",fontSize:24}})})})}),e.jsx(s,{sx:{position:"absolute",bottom:"60px",right:"2%",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",gap:1},children:e.jsx(s,{sx:{width:"220px",borderRadius:"8px",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",background:"transparent"},children:L.relax?e.jsx("img",{src:"/System_Hack_Novosibirsk/questionsAssets/RelaxAbilityQuestion/relax_pic.png",alt:"Отдых",style:{width:"100%",height:"100%",objectFit:"contain"}}):e.jsx(s,{sx:{width:"100%",height:"100%",background:"linear-gradient(135deg, #E0E0E0 0%, #BDBDBD 100%)",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"8px"},children:e.jsx(w,{sx:{color:"#757575",fontSize:24}})})})}),e.jsx(s,{ref:h,onMouseDown:$,onTouchStart:$,sx:{position:"absolute",top:P.y,left:P.x,transform:"translate(-50%, -50%)",width:"150px",cursor:c?"grabbing":"grab",transition:c?"none":"all 0.1s ease",zIndex:10,"&:hover":{transform:"translate(-50%, -50%) scale(1.05)"}},children:S?e.jsx(s,{sx:{width:"100%",height:"100%",background:"linear-gradient(135deg, #E0E0E0 0%, #BDBDBD 100%)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(w,{sx:{color:"#757575",fontSize:32}})}):e.jsx(O,{in:!S,timeout:300,children:e.jsx(s,{sx:{width:"100%",borderRadius:"12px",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center"},children:y[m]&&y[m]!=="fallback"?e.jsx("img",{src:y[m],alt:`Кадр анимации ${m+1}`,style:{width:"100%",objectFit:"contain",display:"block"}}):e.jsxs(s,{sx:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",color:"white",borderRadius:"12px"},children:[e.jsx(w,{sx:{fontSize:24,mb:.5}}),e.jsxs(E,{variant:"caption",fontWeight:"bold",children:[Math.round(d*100),"%"]})]})})})})]}),e.jsx(s,{sx:{mt:0,px:2,width:"100%",maxWidth:"600px",mb:5},children:e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:2,mt:0,position:"relative"},children:[e.jsxs(s,{sx:{flexGrow:1,position:"relative"},children:[e.jsx(s,{sx:{height:12,borderRadius:"8px 0 0 8px",backgroundColor:"#E0E0E0",position:"relative",overflow:"hidden"},children:e.jsx(s,{sx:{position:"absolute",right:0,top:0,height:"100%",width:`${b.left}%`,backgroundColor:"#4CAF50",transition:c?"none":"width 0.1s ease",borderRadius:b.left===100?"8px 0 0 8px":"0"}})}),e.jsx(E,{variant:"caption",color:"#000000",fontWeight:"bold",fontSize:"1.1rem",sx:{position:"absolute",top:"100%",left:0,mt:.5},children:"Я постоянно думаю о работе"})]}),e.jsx(s,{sx:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",minWidth:"60px"},children:e.jsx(s,{sx:{width:3,height:20,backgroundColor:"#E0E0E0",borderRadius:2,mb:.5}})}),e.jsxs(s,{sx:{flexGrow:1,position:"relative"},children:[e.jsx(s,{sx:{height:12,borderRadius:"0 8px 8px 0",backgroundColor:"#E0E0E0",position:"relative",overflow:"hidden"},children:e.jsx(s,{sx:{position:"absolute",left:0,top:0,height:"100%",width:`${b.right}%`,backgroundColor:"#4CAF50",transition:c?"none":"width 0.1s ease",borderRadius:b.right===100?"0 8px 8px 0":"0"}})}),e.jsx(E,{variant:"caption",color:"#000000",fontWeight:"bold",fontSize:"1.1rem",sx:{position:"absolute",top:"100%",right:0,mt:.5},children:"После окончания рабочего дня я забываю о работе"})]})]})})]})})};export{Y as default};
