import{r as n,j as e,P as b,B as a,L as E,T as j}from"./index-BOKiCvF3.js";const B=({currentAnswer:x,onAnswer:m})=>{const[f,w]=n.useState(x!==void 0?x:.5),[r,p]=n.useState(!1),u=n.useRef(null),g=n.useCallback(o=>{p(!0),o.preventDefault()},[]),s=n.useCallback(o=>{if(!r||!u.current)return;const c=u.current.getBoundingClientRect(),l=o.clientY||o.touches&&o.touches[0].clientY;if(!l)return;const d=c.top,h=c.height,v=Math.max(0,Math.min(1,(l-d)/h));w(v),m(v)},[r,m]),i=n.useCallback(()=>{p(!1)},[]);n.useEffect(()=>(r&&(document.addEventListener("mousemove",s),document.addEventListener("mouseup",i),document.addEventListener("touchmove",s),document.addEventListener("touchend",i)),()=>{document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",i),document.removeEventListener("touchmove",s),document.removeEventListener("touchend",i)}),[r,s,i]);const t=(o=>{const c=-40+o*80,l=180+(1-o)*10,d=10-o*20,h=100-o*10,y=.7+o*.3;return{mouthCurvature:c,mouthY:l,eyeBrowCurvature:d,eyeBrowY:h,eyeOpenness:y}})(f);return e.jsx(b,{elevation:3,sx:{p:4,border:"2px solid #E0EFE5",background:"#FFFFFF",position:"relative",overflow:"hidden",minHeight:"600px",display:"flex",flexDirection:"column",width:"100%",height:"100%"},children:e.jsxs(a,{ref:u,sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flex:1,width:"100%",height:"100%",position:"relative",cursor:r?"grabbing":"default"},onMouseDown:g,onTouchStart:g,children:[e.jsx(a,{sx:{mb:4,textAlign:"center",width:"100%",maxWidth:"700px"},children:e.jsxs(a,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:1},children:[e.jsx(E,{variant:"determinate",value:f*100,sx:{width:"100%",height:10,borderRadius:5,backgroundColor:"#f0f0f0","& .MuiLinearProgress-bar":{backgroundColor:"#4CAF50",borderRadius:5}}}),e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",width:"100%",mt:.5},children:[e.jsx(j,{variant:"body2",color:"#000000",fontWeight:"bold",fontSize:"1.1rem",children:"Меня многое не устраивает"}),e.jsx(j,{variant:"body2",color:"#000000",fontWeight:"bold",fontSize:"1.1rem",children:"Я счастлив и доволен"})]})]})}),e.jsx(a,{sx:{position:"relative",width:"600px",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsxs("svg",{width:"300",height:"300",viewBox:"0 0 300 300",style:{cursor:"grab",filter:"grayscale(100%)"},children:[e.jsx("circle",{cx:"150",cy:"150",r:"120",fill:"#F5F5F5",stroke:"#9E9E9E",strokeWidth:"3"}),e.jsx("ellipse",{cx:"110",cy:"120",rx:"15",ry:15*t.eyeOpenness,fill:"#424242"}),e.jsx("ellipse",{cx:"190",cy:"120",rx:"15",ry:15*t.eyeOpenness,fill:"#424242"}),e.jsx("path",{d:`M 90,${t.eyeBrowY} Q 110,${t.eyeBrowY+t.eyeBrowCurvature} 130,${t.eyeBrowY}`,stroke:"#424242",strokeWidth:"4",fill:"none"}),e.jsx("path",{d:`M 170,${t.eyeBrowY} Q 190,${t.eyeBrowY+t.eyeBrowCurvature} 210,${t.eyeBrowY}`,stroke:"#424242",strokeWidth:"4",fill:"none"}),e.jsx("path",{d:`M 100,${t.mouthY} Q 150,${t.mouthY+t.mouthCurvature} 200,${t.mouthY}`,stroke:"#424242",strokeWidth:"4",fill:"none",strokeLinecap:"round"})]})})]})})};export{B as default};
