import{r as n,j as t,P as F,B as s,L as S,T as $}from"./index-H7cXeJn2.js";const P=({question:I,currentAnswer:m,onAnswer:g})=>{const[o,k]=n.useState(m!==void 0?m:0),[a,b]=n.useState(!1),x=n.useRef(null),u=6,d=100,E=350,v=30,D=Array.from({length:u},(e,i)=>`/System_Hack_Novosibirsk/questionsAssets/AchievementAssessmentQuestion/${(i+1).toString().padStart(4,"0")}.png`),[y,M]=n.useState(Array.from({length:u},(e,i)=>({id:i,visible:!1,opacity:0,shelf:i<3?"top":"bottom",position:i%3,path:D[i]})));n.useEffect(()=>{const e=Math.floor(o*u),i=o>0?1:0;M(h=>h.map((f,p)=>({...f,visible:p<e,opacity:p<e?i:0})))},[o]);const w=n.useCallback(e=>{b(!0),e.preventDefault()},[]),r=n.useCallback(e=>{if(!a||!x.current)return;const i=x.current.getBoundingClientRect(),h=e.clientX||e.touches&&e.touches[0].clientX;if(!h)return;const f=i.left,p=h,C=i.width-100,A=Math.max(0,Math.min(C,p-f))/C,L=Math.max(0,Math.min(1,A));k(L),g(L)},[a,g]),l=n.useCallback(()=>{b(!1)},[]);n.useEffect(()=>(a&&(document.addEventListener("mousemove",r),document.addEventListener("mouseup",l),document.addEventListener("touchmove",r),document.addEventListener("touchend",l)),()=>{document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",l),document.removeEventListener("touchmove",r),document.removeEventListener("touchend",l)}),[a,r,l]);const c=v+(E-v)*o,j=60*o;return t.jsx(F,{elevation:3,sx:{p:4,border:"2px solid #E0EFE5",background:"#FFFFFF",position:"relative",overflow:"hidden",minHeight:"650px",display:"flex",flexDirection:"column",width:"100%",height:"100%"},children:t.jsxs(s,{ref:x,sx:{display:"flex",flexDirection:"column",alignItems:"center",flex:1,width:"100%",height:"100%",position:"relative"},children:[t.jsx(s,{sx:{mb:3,textAlign:"center",width:"100%"},children:t.jsxs(s,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:1,mt:2},children:[t.jsx(S,{variant:"determinate",value:o*100,sx:{width:"100%",height:10,borderRadius:5,backgroundColor:"#f0f0f0","& .MuiLinearProgress-bar":{backgroundColor:"#4CAF50",borderRadius:5}}}),t.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",width:"100%",mt:.5},children:[t.jsx($,{variant:"body2",color:"text.secondary",fontWeight:"bold",children:"У меня не было каких-либо значимых результатов"}),t.jsx($,{variant:"body2",color:"text.secondary",fontWeight:"bold",children:"У меня было множество достижений"})]})]})}),t.jsxs(s,{sx:{width:"100%",height:"350px",position:"relative",display:"flex",flexDirection:"column",justifyContent:"space-between",mb:3},children:[t.jsxs(s,{sx:{position:"relative",height:"160px",display:"flex",justifyContent:"center",alignItems:"flex-end"},children:[t.jsx(s,{sx:{position:"absolute",bottom:0,width:"85%",height:"25px",backgroundColor:"#8B4513",borderRadius:"4px 4px 0 0",border:"2px solid #654321",boxShadow:"0 4px 8px rgba(0,0,0,0.3)"}}),y.filter(e=>e.shelf==="top").map(e=>t.jsx(s,{sx:{position:"absolute",bottom:"30px",left:`calc(7.5% + ${e.position*28}%)`,width:`${d}px`,height:`${d}px`,opacity:e.opacity,transition:"all 0.5s ease",transform:e.visible?"translateY(0) scale(1)":"translateY(20px) scale(0.8)",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx("img",{src:e.path,alt:`Объект ${e.id+1}`,style:{width:"100%",height:"100%",objectFit:"contain",filter:e.visible?"none":"grayscale(100%) brightness(0.7)",transition:"all 0.5s ease"}})},e.id))]}),t.jsxs(s,{sx:{position:"relative",height:"160px",display:"flex",justifyContent:"center",alignItems:"flex-start",mt:2},children:[t.jsx(s,{sx:{position:"absolute",top:0,width:"85%",height:"25px",backgroundColor:"#8B4513",borderRadius:"0 0 4px 4px",border:"2px solid #654321",boxShadow:"0 -4px 8px rgba(0,0,0,0.3)"}}),y.filter(e=>e.shelf==="bottom").map(e=>t.jsx(s,{sx:{position:"absolute",top:"30px",left:`calc(7.5% + ${e.position*28}%)`,width:`${d}px`,height:`${d}px`,opacity:e.opacity,transition:"all 0.5s ease",transform:e.visible?"translateY(0) scale(1)":"translateY(-20px) scale(0.8)",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx("img",{src:e.path,alt:`Объект ${e.id+1}`,style:{width:"100%",height:"100%",objectFit:"contain",filter:e.visible?"none":"grayscale(100%) brightness(0.7)",transition:"all 0.5s ease"}})},e.id))]})]}),t.jsx(s,{sx:{position:"relative",width:"100%",height:"100px",display:"flex",justifyContent:"flex-start",alignItems:"center"},children:t.jsxs("svg",{width:"100%",height:"100",style:{cursor:a?"grabbing":"grab",transition:"all 0.1s ease"},onMouseDown:w,onTouchStart:w,children:[t.jsx("path",{d:`M 30,50 
                                Q ${30+j},50 ${30+c},50`,stroke:"#e0e0e0",strokeWidth:"10",fill:"none",strokeLinecap:"round"}),t.jsx("path",{d:`M 30,50 
                                Q ${30+j},50 ${30+c},50`,stroke:"#4CAF50",strokeWidth:"10",fill:"none",strokeLinecap:"round"}),t.jsx("polygon",{points:`${50+c},50 ${10+c},35 ${10+c},65`,fill:"#4CAF50"})]})})]})})};export{P as default};
